{"version":3,"sources":["MineSweeper/config.js","assets/flag.png","assets/mine-ceil.png","assets/mine-death.png","assets/misflagged.png","assets/question.png","assets/checked.png","MineSweeper/MinesweeperView.js","assets/empty.png","assets/open1.png","assets/open2.png","assets/open3.png","assets/open4.png","assets/open5.png","assets/open6.png","assets/open7.png","assets/open8.png","assets/clock.png","assets/restart.png","MineSweeper/index.js","App.js","serviceWorker.js","index.js"],"names":["Config","Beginner","rows","columns","ceils","mines","Intermediate","Expert","Ceils","onMouseDown","onMouseEnter","renderContent","ceil","index","state","minesAround","opening","CeilBackgroundOpen","CeilBackgroundCover","map","e","className","Die","alt","src","mineDeath","MisFlagged","misFlagged","Flag","flag","MinesAround","Question","question","QuestionOpen","Mine","mine","styled","div","changeCeilState","onReset","openCeil","openCeils","seconds","status","difficulty","openingCeil","openingCeils","sameTouchPos","lastTouch","restart","useRef","dropDown","topBar","useState","openOption","setOpenOption","behavior","openBehavior","setOpenBehavior","onMouseUp","current","contains","target","onTouchEndDropdown","useEffect","window","addEventListener","removeEventListener","onContextMenu","preventDefault","ref","style","visibility","onTouchStart","checked","href","onMouseOver","option","button","filter","length","justifySelf","width","height","onClick","onTouchEnd","Array","prototype","indexOf","call","currentTarget","children","closest","Date","buttons","platform","getInitState","genGameConfig","reducer","action","type","payload","exclude","insertMines","indexes","autoCeils","forEach","i","newState","Error","getNearIndexes","config","fill","_","originCeils","indexArray","keys","sampleSize","chosen","nearIndex","walked","walkCeils","reduce","lastIndexes","ceilIndex","row","Math","floor","column","arrayIndex","includes","MineSweeper","defaultDifficulty","useReducer","dispatch","setSeconds","addSecond","sec","timer","setInterval","clearInterval","useTimer","MinesweeperView","console","log","mineIndex","find","App","React","innerWidth","setPlatform","setLastTouch","samePos","setSamePos","onResize","touchStart","touchMove","display","justifyContent","alignItems","transform","transformOrigin","Boolean","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.bccdd1eb.chunk.js","sourcesContent":["export const Config = {\n  Beginner: {\n    rows: 9,\n    columns: 9,\n    ceils: 81,\n    mines: 10,\n  },\n  Intermediate: {\n    rows: 16,\n    columns: 16,\n    ceils: 256,\n    mines: 40,\n  },\n  Expert: {\n    rows: 16,\n    columns: 30,\n    ceils: 480,\n    mines: 99,\n  },\n};\n","export default __webpack_public_path__ + \"static/media/flag.96cbdcf7.png\";","export default __webpack_public_path__ + \"static/media/mine-ceil.3260f219.png\";","export default __webpack_public_path__ + \"static/media/mine-death.f6c49a88.png\";","export default __webpack_public_path__ + \"static/media/misflagged.2cc3cc08.png\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAALElEQVR42mNgGNbgPxomSzMuPu0NIGTgENFMFQOolhYGuxf27t37f2A0AwEAQr8eVaRMnxsAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAYAAADEUlfTAAAAI0lEQVR42mNgwA3+45P4j03Ff3TJ/9gk0AX+Y7MLpwRO1wEA1lcU7C7/FKUAAAAASUVORK5CYII=\"","import React, { useEffect, useRef, useState } from 'react';\nimport styled from 'styled-components';\nimport clock from '../assets/clock.png';\nimport restartIcon from '../assets/restart.png';\nimport empty from '../assets/empty.png';\nimport open1 from '../assets/open1.png';\nimport open2 from '../assets/open2.png';\nimport open3 from '../assets/open3.png';\nimport open4 from '../assets/open4.png';\nimport open5 from '../assets/open5.png';\nimport open6 from '../assets/open6.png';\nimport open7 from '../assets/open7.png';\nimport open8 from '../assets/open8.png';\nimport flag from '../assets/flag.png';\nimport mine from '../assets/mine-ceil.png';\nimport mineDeath from '../assets/mine-death.png';\nimport misFlagged from '../assets/misflagged.png';\nimport question from '../assets/question.png';\nimport checked from '../assets/checked.png';\n\nfunction MineSweeperView({\n  ceils,\n  className,\n  changeCeilState,\n  onReset,\n  openCeil,\n  openCeils,\n  mines,\n  status,\n  seconds,\n  // onClose,\n  difficulty,\n  openingCeil,\n  openingCeils,\n  sameTouchPos,\n  lastTouch,\n}) {\n  const restart = useRef(null);\n  const dropDown = useRef(null);\n  const topBar = useRef(null);\n  const [openOption, setOpenOption] = useState(null);\n  const [openBehavior, setOpenBehavior] = useState({ index: -1, behavior: '' });\n\n  function remainMines() {\n    return (\n      mines -\n      ceils.filter(ceil => ceil.state === 'flag' || ceil.state === 'misflagged')\n        .length\n    );\n  }\n  \n  function onMouseDownContent(e) {\n    if (e.button !== 0) return;\n    if (\n      restart.current.contains(e.target) ||\n      status === 'won' ||\n      status === 'died'\n    )\n      return;\n  }\n\n  useEffect(() => {\n    const { index, behavior } = openBehavior;\n    switch (behavior) {\n      case 'single':\n        return openingCeil(index);\n      case 'multi':\n        return openingCeils(index);\n      default:\n        openingCeil(-1);\n    }\n  }, [openBehavior.index, openBehavior.behavior, openBehavior, openingCeil, openingCeils]);\n\n  function onMouseDownCeils(e, index) {\n    if (e.button === 2 && e.buttons === 2 && index !== -1) {\n      changeCeilState(index);\n    } else if (e.button === 0 && e.buttons === 1) {\n      setOpenBehavior({\n        index,\n        behavior: 'single',\n      });\n    } else if (e.buttons === 3) {\n      setOpenBehavior({\n        index,\n        behavior: 'multi',\n      });\n    }\n  }\n\n  function onMouseOverCeils(index) {\n    setOpenBehavior({\n      index,\n      behavior: openBehavior.behavior,\n    });\n  }\n\n  function onMouseUpCeils() {\n    const { behavior, index } = openBehavior;\n    if (index === -1) return;\n    if (behavior === 'single') {\n      openCeil(index);\n    } else if (behavior === 'multi') {\n      openCeils(index);\n    }\n  }\n\n  function hoverOption(option) {\n    if (openOption) setOpenOption(option);\n  }\n  function onMouseUp(e) {\n    setOpenBehavior({ index: -1, behavior: '' });\n    \n    if (!dropDown.current.contains(e.target)) setOpenOption('');\n  }\n\n  function onTouchEndDropdown(e) {\n    if (\n      !dropDown.current.contains(e.target) &&\n      !topBar.current.contains(e.target)\n    )\n      setOpenOption('');\n  }\n  function onTouchEndCeils(e) {\n    const index = Array.prototype.indexOf.call(\n      e.currentTarget.children,\n      e.target.closest('.mine__ceil'),\n    );\n    if (index === -1 || !sameTouchPos) return;\n    if (new Date() - lastTouch < 150) {\n      if (ceils[index].state === 'open') {\n        openCeils(index);\n      } else {\n        openCeil(index);\n      }\n    } else {\n      changeCeilState(index);\n    }\n  }\n  useEffect(() => {\n    window.addEventListener('touchend', onTouchEndDropdown);\n    window.addEventListener('mouseup', onMouseUp);\n    return () => {\n      window.removeEventListener('mouseup', onMouseUp);\n      window.removeEventListener('touchend', onTouchEndDropdown);\n    };\n  }, []);\n  return (\n    <div className={className} onContextMenu={e => e.preventDefault()}>\n      <div className=\"mine__drop-downs\" ref={dropDown}>\n        <div\n          style={{ visibility: openOption === 'Game' ? 'visible' : 'hidden' }}\n          className=\"mine__drop-down\">\n          <div className=\"mine__drop-down__title\">Game</div>\n          <div className=\"mine__drop-down__menu\">\n            <div className=\"mine__drop-down__row\"\n              onMouseUp={() => {\n                onReset();\n                setOpenOption('');\n                }}>\n              <div className=\"mine__drop-down__check\" />\n              <span>New</span>\n              <span className=\"mine__drop-down__hot-key\" />\n              <div className=\"mine__drop-down__arrow\" />\n            </div>\n            <div className=\"mine__drop-down__separator\" />\n            <div\n              className=\"mine__drop-down__row\"\n              onMouseUp={() => {\n                onReset('Beginner');\n                setOpenOption('');\n              }}\n              onTouchStart={() => onReset('Beginner')}\n            >\n              <div className=\"mine__drop-down__check\">\n                {difficulty === 'Beginner' && (\n                  <img src={checked} alt=\"checked\" />\n                )}\n              </div>\n              <span>Beginner</span>\n              <span className=\"mine__drop-down__hot-key\" />\n              <div className=\"mine__drop-down__arrow\" />\n            </div>\n            <div\n              className=\"mine__drop-down__row\"\n              onMouseUp={() => {\n                onReset('Intermediate');\n                setOpenOption('');\n              }}\n              onTouchStart={() => onReset('Intermediate')}\n            >\n              <div className=\"mine__drop-down__check\">\n                {difficulty === 'Intermediate' && (\n                  <img src={checked} alt=\"checked\" />\n                )}\n              </div>\n              <span>Intermediate</span>\n              <span className=\"mine__drop-down__hot-key\" />\n              <div className=\"mine__drop-down__arrow\" />\n            </div>\n            <div\n              className=\"mine__drop-down__row\"\n              onMouseUp={() => {\n                onReset('Expert');\n                setOpenOption('');\n              }}\n              onTouchStart={() => onReset('Expert')}\n            >\n              <div className=\"mine__drop-down__check\">\n                {difficulty === 'Expert' && <img src={checked} alt=\"checked\" />}\n              </div>\n              <span>Expert</span>\n              <span className=\"mine__drop-down__hot-key\" />\n              <div className=\"mine__drop-down__arrow\" />\n            </div>\n            <div className=\"mine__drop-down__separator\" />\n            <div className=\"mine__drop-down__row\">\n              <div className=\"mine__drop-down__check\" />\n              <a\n                className=\"mine__drop-down__text\"\n                href=\"https://github.com/lizzzyu\"\n              >\n                Github\n              </a>\n              <span className=\"mine__drop-down__hot-key\" />\n              <div className=\"mine__drop-down__arrow\" />\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"mine__top-bar\" ref={topBar}>\n        <div\n          onMouseDown={() => setOpenOption('Game')}\n          onTouchStart={() => setOpenOption(openOption ? '' : 'Game')}\n          onMouseOver={() => hoverOption('Game')}\n          className=\"mine__top-bar__text\"\n        >\n          Game\n        </div>\n      </div>\n      <section className=\"mine__content\" onMouseDown={onMouseDownContent}>\n        <div className=\"mine__score-bar\">\n          <div className=\"mine__digits__outer\">\n            <img alt=\"flag\" src={flag} />\n            {remainMines()}\n          </div>\n          <div className=\"mine__digits__outer\" style={{ justifySelf: 'center' }}>\n            <img width=\"14px\" height=\"14px\" alt=\"clock\" src={clock} />\n            {seconds}\n          </div>\n          <div className=\"mine__restart__wrapper\">\n            <button className=\"mine__restart\" ref={restart} onClick={() => onReset()}>\n              <img alt=\"restart\" src={restartIcon} />\n            </button>\n          </div>\n        </div>\n        <div\n          className=\"mine__content__inner\"\n          onTouchEnd={onTouchEndCeils}\n          onMouseUp={onMouseUpCeils}\n        >\n          <Ceils\n            ceils={ceils}\n            onMouseDown={onMouseDownCeils}\n            onMouseEnter={onMouseOverCeils}\n          />\n        </div>\n      </section>\n    </div>\n  );\n}\nfunction getTextImg(index) {\n  return [empty, open1, open2, open3, open4, open5, open6, open7, open8][index];\n}\nfunction Ceils({ ceils, onMouseDown, onMouseEnter }) {\n  function renderContent(ceil, index) {\n    const { state, minesAround, opening } = ceil;\n    switch (state) {\n      case 'open':\n        return <MinesAround mines={minesAround} />;\n      case 'flag':\n        return <Flag />;\n      case 'misflagged':\n        return <MisFlagged />;\n      case 'mine':\n        return <Mine />;\n      case 'die':\n        return <Die />;\n      case 'unknown':\n        return opening ? <QuestionOpen /> : <Question />;\n      default:\n        return opening ? <CeilBackgroundOpen index={index} /> : <CeilBackgroundCover index={index} />;\n    }\n  }\n\n  return ceils.map((ceil, index) => (\n    <div\n      key={index}\n      onMouseEnter={() => onMouseEnter(index)}\n      onMouseDown={e => onMouseDown(e, index)}\n      className=\"mine__ceil\"\n      index={index}\n    >\n      {renderContent(ceil, index)}\n    </div>\n  ));\n}\n\nconst Die = () => (\n  <>\n    <CeilBackgroundOpen />\n    <img alt=\"death\" src={mineDeath} />\n  </>\n);\nconst MisFlagged = () => (\n  <>\n    <CeilBackgroundOpen />\n    <img alt=\"misFlagged\" src={misFlagged} />\n  </>\n);\nconst Flag = () => (\n  <>\n    <CeilBackgroundCover />\n    <img alt=\"flag\" src={flag} />\n  </>\n);\nconst MinesAround = ({ mines }) => (\n  <>\n    <CeilBackgroundOpen />\n    <img alt=\"mines-around\" src={getTextImg(mines)} />\n  </>\n);\nconst Question = () => (\n  <>\n    <CeilBackgroundCover />\n    <img alt=\"question\" src={question} />\n  </>\n);\nconst QuestionOpen = () => (\n  <>\n    <CeilBackgroundOpen />\n    <img alt=\"question\" src={question} />\n  </>\n);\nconst Mine = () => (\n  <>\n    <CeilBackgroundOpen />\n    <img alt=\"mine\" src={mine} />\n  </>\n);\n\nconst CeilBackgroundCover = styled.div`\n  position: absolute;\n  width: 16px;\n  height: 16px;\n  background-color: #E8F7EE;\n  border-left: #fff solid 2px;\n  border-top: #fff solid 2px;\n  border-right: #B8C4BB solid 2px;\n  border-bottom: #B8C4BB solid 2px;\n`;\n\nconst CeilBackgroundOpen = styled.div`\n  position: absolute;\n  width: 16px;\n  height: 16px;\n  border-left: #fad13f solid 1px;\n  border-top: #fad13f solid 1px;\n  background-color: #FCE38A\n`;\n\nexport default styled(MineSweeperView)`\n  display: inline-block;\n  img {\n    pointer-events: none;\n  }\n  .mine__drop-downs {\n    position: absolute;\n    display: flex;\n    height: 20px;\n  }\n  .mine__drop-down {\n    position: relative;\n    z-index: 1;\n  }\n  .mine__drop-down__title {\n    padding: 0 5px;\n    height: 100%;\n    line-height: 20px;\n    font-size: 11px;\n    color: white;\n    background-color: #663f46;\n  }\n  .mine__drop-down__menu {\n    background-color: white;\n    position: absolute;\n    box-shadow: 2px 2px 5px rgb(100, 100, 100);\n    padding: 5px;\n    display: grid;\n    grid-template-columns: 18px auto auto 15px;\n    line-height: 18px;\n    font-size: 11px;\n  }\n  .mine__drop-down__row {\n    display: contents;\n    &:hover > * {\n      background: #3f665f;\n      filter: invert(100%);\n    }\n  }\n  .mine__drop-down__separator {\n    grid-column: 1 / 5;\n    height: 1px;\n    background-color: gray;\n    margin: 3px 1px;\n  }\n  .mine__drop-down__check {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  .mine__drop-down__arrow {\n  }\n  .mine__drop-down__hot-key {\n    padding-left: 5px;\n  }\n  .mine__drop-down__text {\n    white-space: nowrap;\n  }\n  .mine__top-bar {\n    position: relative;\n    display: flex;\n    height: 20px;\n    background-color: #e8e5df;\n  }\n  .mine__top-bar__text {\n    padding: 0 5px;\n    height: 100%;\n    line-height: 20px;\n    font-size: 11px;\n    &:hover {\n      color: ${({ platform }) => (platform === 'desktop' ? '#FFF' : '#000')};\n      background-color: ${({ platform }) =>\n        platform === 'desktop' ? '#663f46' : 'transparent'};\n    }\n  }\n  .mine__content {\n    background-color: rgb(192, 192, 192);\n  }\n  .mine__score-bar {\n    display: grid;\n    grid-auto-flow: column;\n    grid-template-columns: 1fr 1fr 1fr;\n    column-gap: 10px;\n    align-items: center;\n    justify-content: center;\n\n    height: 34px;\n    background-color: #4e505f;\n    padding: 3px 4px;\n  }\n  .mine__digits__outer {\n    font-size: 12px;\n    color: #fff;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 40px;\n    height: 24px;\n  }\n  .mine__restart__wrapper {\n    display: grid;\n    justify-content: flex-end;\n  }\n  .mine__restart {\n    background-color: transparent;\n    color: transparent;\n    outline: none;\n    border: none;\n\n    display: flex;\n    align-items: center;\n    \n    :active {\n      img {\n        transform: scale(0.8) rotate(180deg);\n      }\n    } \n  }\n  .mine__content__inner {\n    display: grid;\n    grid-template-columns: repeat(${({ columns }) => columns}, 16px);\n    grid-template-rows: repeat(${({ rows }) => rows}, 16px);\n    border: 3px solid #4e505f;\n  }\n  .mine__ceil {\n    position: relative;\n    img {\n      position: absolute;\n      width: 16px;\n      height: 16px;\n    }\n  }\n`;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVR42mNgAAIAAAUAAen63NgAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAK0lEQVR42mNgGAng/38IpkgzWQYgaybZAHTNA+OFIW4AtkAkySCKDRhKAAB8jU+x6ZwbNAAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAL0lEQVR42mNgGIagmuE/XkyRZoKG4FNEtCvIMZwkb1EUmLTVSJFzaRKNZCemIQcA2OFf+6sS8JAAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAK0lEQVR42mNgGF7gPxARwhQbQNAQYgynjwEUO5+q/qdfGFAcjTRLA4MbAACQL3uF13XmMAAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAJ0lEQVR42mNgGK6g+j8CY+PT1gBsiulnALJCfJh2BpDirZFmwGAGAE2EUrFtzr/cAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAJklEQVR42mNgGF6gmoHhPzGYPgZQ7AWahQFtA5Fu3hvYdMAw/AAAgjlnXUQq77YAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAKklEQVR42mNgGIaguvo/XkyRZpIMoNj5NPE/VcIAryH4FNHfAJqFw/ADANeOjOlonwSHAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAHklEQVR42mNgGHbgP5GYdgYQazj9DRi1fSCjbggAADl0K9Xj0B5TAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAALElEQVR42mNgGH6gurr6Pz5MkWaChuBTRB8DKA4DqgbiwIQBxdFIlUAcegAAKVC5Qc8U50QAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAdgAAAHYBTnsmCAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAMFSURBVDiNbZJNTFxlFIaf893vzp0BLg4zDFomtkREBVPR2lhTUyPRaKth48aFhmCaNPizqXFhoosm6tZFNSWyIC6sP4nRjW2saUQ0kWgFnUSrdrRJgTIwwDADDMzcv8+FhUjad3mS50nOe44UPh4cTvXYTyqHVj9ByaDenH3NfO5ZscG4LQ1aSSU00aUG7Y23HY9GLF+eMcZYAUwvXwzPSv23o2c1cqTerAirivmPFN60+I62bOF/UXjJfX6s6VBA6AIimA3e1lqkN9SCVxSmhxXxSFNLt9lLbbtZx5DAI+1tIAvzMX6uUp3VpJ7zUI0GaaBbG5EZfNqnTykcY7G4p4evW27jUH8fjl8iAlRbih/OnOfBizkaC3OsfGKTet5DLJOXWv5YZ/FT68/Vv5QudXRz+bFB2tsddrVyXUythv/OSZKlBZqfCK7YB8x9Kt418s/i7wS4LlOpDogpbkn/B4yNTzA2PrEtCCyL/J09eFaM1XNWOblneEX9MfDSHQLxaiaL+8DjZFps5Fp7FyZzXJjMbQts2+bup58iSCYB6Z05ejyl/Uh6lAjFUMjlJnAP9PDKG6P4YcjqcpFMOrljja++mWCfaDqAOmG7jsJoyQDpuEPvvQdxG0P6jzxMbbNOuVymq7Njh+Dwowcxv/x47bLhmg7cYEqt6SixUlSyXqHa2EzfQ/uvbxCIjCEsV4hVygArV27NXFX7R0Y2lHDZWSzgfPcZpfWQzfoNecIwZGb0Q+Ib6wBf9J04ESgArTnmBVF0z2qBXflJfsotEQTg+z6+7wMwN7+E9e33dC0XEMWmJdFbANvfmnv25WElZkhaWvj7pizR/Y+w7kJTAm7HZ+HLc+wuF9FePcKYgc7Rd0/vEABcPTlUXZnS8bhSytMOa24SMRHNlRKaEB03UdPh8FJr/6nuLWZbYH4dygZOMLtRtj6Yfs9O2DZ3WSI3i0ioxORBzmRf3ByI0rI33hg0S2Z0DUBvCbxEzVXGLums//re0+/P3ahE79UXxnTNP7+mE7Gt2b+pNT7954C2+AAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAbwAAAG8B8aLcQwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAG+SURBVDiNpZC/a1NhFIaf97tR6E3iYtXFQdRBsDhFUrkgRpKWOjhJEfwH6lBwchXcxMEiuDk5dHHSTW9si8Q0inTwxyDuilZE6E0MJPcel9xLrJcI+m7nfO95zns+mRn/o8J4sV2rlXzv57IpmZVRARUw3prU7vcLt6dbrZ3dAKUJduZOB0rcA8HR/F32SYl31V/bfPwHIGqcOSdLngHuL4mHJtcohZsbacNxseI7S+6PDf9A3PKscMSZdxhxBfiYnixLHkbzwcHsD3o975rBMQBBZOhEMex8Gdu6Gs0HTRcP2yPfNPHgMnAXwBnMps4E3Sk2fxsGoPTkxVfDbmSxzS1mCYBT2YfAvbzDu/XqO9DJtDZZ0K1XDXjvMPz0wYs1lQdIpCVBNN4TRIm05Ey0MmPBzucBymGnFUsLKUQQxdJCOey0nEzPs2hmN7v12UOTIMCbdBhA20FQ9qcGW2YcH3k/g113sduIPfY5uGQkNcmt+GHn0W6wzIzeXLViCW1gT972kQbILhTDV83xpgPwn758bc4awIcJgG8Jrp+bINPizN7ud3/ZxFlMM4L9wJZka91hceXA+no0GfAP+gX6o7aIbvQgxgAAAABJRU5ErkJggg==\"","import React, { useReducer, useEffect, useState } from 'react';\nimport sampleSize from 'lodash.samplesize';\n\nimport { Config } from './config';\nimport MinesweeperView from './MinesweeperView';\n\n// state: {\n//   difficulty: 'Beginner' || 'Intermediate' || 'Expert',\n//   status: 'new' || 'started' || 'died' || 'won',\n//   rows: Number,\n//   columns: Number,\n//   mines: Number,\n//   ceils: Array {\n//     state: 'cover' || 'flag' || 'unknown' || 'open' || 'die' || 'misflagged',\n//     minesAround: Number (negative for mine itself),\n//     opening: true || false\n//   }\n// }\n\nfunction getInitState(difficulty = 'Beginner') {\n  return {\n    difficulty,\n    status: 'new',\n    ...genGameConfig(Config[difficulty]),\n  };\n}\n\nfunction reducer(state, action = {}) {\n  switch (action.type) {\n    case 'CLEAR_MAP':\n      const difficulty = action.payload || state.difficulty;\n      return getInitState(difficulty);\n    case 'START_GAME':\n      const exclude = action.payload;\n      return {\n        ...state,\n        ...insertMines({ ...Config[state.difficulty], exclude }, state.ceils),\n        status: 'started',\n      };\n    case 'OPEN_CEIL': {\n      const indexes = autoCeils(state, action.payload);\n      const ceils = [...state.ceils];\n      indexes.forEach(i => {\n        const ceil = ceils[i];\n        ceils[i] = { ...ceil, state: 'open' };\n      });\n      return {\n        ...state,\n        ceils,\n      };\n    }\n    case 'CHANGE_CEIL_STATE': {\n      const index = action.payload;\n      const ceils = [...state.ceils];\n      const ceil = state.ceils[index];\n      let newState;\n      switch (ceil.state) {\n        case 'cover':\n          newState = 'flag';\n          break;\n        case 'flag':\n          newState = 'unknown';\n          break;\n        case 'unknown':\n          newState = 'cover';\n          break;\n        default:\n          throw new Error(`Unknown ceil state ${ceil.state}`);\n      }\n      ceils[index] = { ...ceil, state: newState };\n      return {\n        ...state,\n        ceils,\n      };\n    }\n    case 'GAME_OVER': {\n      const ceils = state.ceils.map(ceil => {\n        if (ceil.minesAround < 0 && ceil.state !== 'flag') {\n          return {\n            ...ceil,\n            state: 'mine',\n          };\n        } else if (ceil.state === 'flag' && ceil.minesAround >= 0) {\n          return {\n            ...ceil,\n            state: 'misflagged',\n          };\n        } else {\n          return {\n            ...ceil,\n            opening: false,\n          };\n        }\n      });\n      ceils[action.payload].state = 'die';\n      return {\n        ...state,\n        status: 'died',\n        ceils,\n      };\n    }\n    case 'WON': {\n      const ceils = state.ceils.map(ceil => {\n        if (ceil.minesAround >= 0) {\n          return {\n            ...ceil,\n            state: 'open',\n          };\n        } else {\n          return {\n            ...ceil,\n            state: 'flag',\n          };\n        }\n      });\n      return {\n        ...state,\n        status: 'won',\n        ceils,\n      };\n    }\n    case 'OPENING_CEIL': {\n      const ceil = state.ceils[action.payload];\n      const ceils = state.ceils.map(ceil => ({\n        ...ceil,\n        opening: false,\n      }));\n      ceils[action.payload] = { ...ceil, opening: true };\n      return {\n        ...state,\n        ceils,\n      };\n    }\n    case 'OPENING_CEILS': {\n      const indexes = getNearIndexes(action.payload, state.rows, state.columns);\n      const ceils = state.ceils.map(ceil => ({\n        ...ceil,\n        opening: false,\n      }));\n      [...indexes, action.payload].forEach(index => {\n        const ceil = { ...ceils[index] };\n        ceil.opening = true;\n        ceils[index] = ceil;\n      });\n      return {\n        ...state,\n        ceils,\n      };\n    }\n    default:\n      return state;\n  }\n}\n\nfunction MineSweeper({\n  defaultDifficulty,\n  // onClose,\n  sameTouchPos,\n  lastTouch,\n  platform,\n}) {\n  const [state, dispatch] = useReducer(\n    reducer,\n    getInitState(defaultDifficulty),\n  );\n  const seconds = useTimer(state.status);\n  function changeCeilState(index) {\n    const ceil = state.ceils[index];\n    if (ceil.state === 'open' || ['won', 'died'].includes(state.status)) return;\n    dispatch({ type: 'CHANGE_CEIL_STATE', payload: index });\n  }\n  function openCeil(index) {\n    switch (state.status) {\n      case 'new':\n        dispatch({ type: 'START_GAME', payload: index });\n        dispatch({ type: 'OPEN_CEIL', payload: index });\n        break;\n      case 'started':\n        const ceil = state.ceils[index];\n        if (['flag', 'open'].includes(ceil.state)) {\n          break;\n        } else if (ceil.minesAround < 0) {\n          dispatch({ type: 'GAME_OVER', payload: index });\n        } else {\n          dispatch({ type: 'OPEN_CEIL', payload: index });\n        }\n        break;\n      default:\n        console.log(state.status);\n    }\n  }\n  function openCeils(index) {\n    const ceil = state.ceils[index];\n    if (\n      ceil.state !== 'open' ||\n      ceil.minesAround <= 0 ||\n      state.status !== 'started'\n    )\n      return;\n    const indexes = getNearIndexes(index, state.rows, state.columns);\n    const nearCeils = indexes.map(i => state.ceils[i]);\n    if (\n      nearCeils.filter(ceil => ceil.state === 'flag').length !==\n      ceil.minesAround\n    )\n      return;\n    const mineIndex = indexes.find(\n      i => state.ceils[i].minesAround < 0 && state.ceils[i].state !== 'flag',\n    );\n    if (mineIndex) {\n      dispatch({ type: 'GAME_OVER', payload: mineIndex });\n    } else {\n      indexes.forEach(i => dispatch({ type: 'OPEN_CEIL', payload: i }));\n    }\n  }\n  useEffect(() => {\n    if (state.status === 'started' && checkRemains() === 0) {\n      dispatch({ type: 'WON' });\n    }\n  });\n  function onReset(difficulty) {\n    dispatch({ type: 'CLEAR_MAP', payload: difficulty });\n  }\n  function checkRemains() {\n    const safeCeils = state.ceils\n      .filter(ceil => ceil.state !== 'open')\n      .filter(ceil => ceil.minesAround >= 0);\n    return safeCeils.length;\n  }\n  function openingCeil(index) {\n    if (['died', 'won'].includes(state.status)) return;\n    dispatch({ type: 'OPENING_CEIL', payload: index });\n  }\n  function openingCeils(index) {\n    if (['died', 'won'].includes(state.status)) return;\n    dispatch({ type: 'OPENING_CEILS', payload: index });\n  }\n  return (\n    <MinesweeperView\n      {...state}\n      // onClose={onClose}\n      changeCeilState={changeCeilState}\n      openCeil={openCeil}\n      openCeils={openCeils}\n      onReset={onReset}\n      seconds={seconds}\n      openingCeil={openingCeil}\n      openingCeils={openingCeils}\n      sameTouchPos={sameTouchPos}\n      lastTouch={lastTouch}\n      platform={platform}\n    />\n  );\n}\n\nfunction genGameConfig(config) {\n  const { rows, columns, mines } = config;\n  const ceils = Array(rows * columns)\n    .fill()\n    .map(_ => ({\n      state: 'cover',\n      minesAround: 0,\n      opening: false,\n    }));\n  return {\n    rows,\n    columns,\n    ceils,\n    mines,\n  };\n}\n\nfunction insertMines(config, originCeils) {\n  const { rows, columns, mines, exclude } = config;\n  const ceils = originCeils.map(ceil => ({ ...ceil }));\n  if (rows * columns !== ceils.length)\n    throw new Error('rows and columns not equal to ceils');\n  const indexArray = [...Array(rows * columns).keys()];\n  sampleSize(indexArray.filter(i => i !== exclude), mines).forEach(chosen => {\n    ceils[chosen].minesAround = -10;\n    getNearIndexes(chosen, rows, columns).forEach(nearIndex => {\n      ceils[nearIndex].minesAround += 1;\n    });\n  });\n  return {\n    rows,\n    columns,\n    ceils,\n    mines,\n  };\n}\n\nfunction autoCeils(state, index) {\n  const { rows, columns } = state;\n  const ceils = state.ceils.map(ceil => ({\n    ...ceil,\n    walked: false,\n  }));\n  return walkCeils(index);\n  function walkCeils(index) {\n    const ceil = ceils[index];\n    if (ceil.walked || ceil.minesAround < 0 || ceil.state === 'flag') return [];\n    ceil.walked = true;\n    if (ceil.minesAround > 0) return [index];\n    return [\n      index,\n      ...getNearIndexes(index, rows, columns).reduce(\n        (lastIndexes, ceilIndex) => {\n          return [...lastIndexes, ...walkCeils(ceilIndex)];\n        },\n        [],\n      ),\n    ];\n  }\n}\n\nfunction getNearIndexes(index, rows, columns) {\n  if (index < 0 || index >= rows * columns) return [];\n  const row = Math.floor(index / columns);\n  const column = index % columns;\n  return [\n    index - columns - 1,\n    index - columns,\n    index - columns + 1,\n    index - 1,\n    index + 1,\n    index + columns - 1,\n    index + columns,\n    index + columns + 1,\n  ].filter((_, arrayIndex) => {\n    if (row === 0 && arrayIndex < 3) return false;\n    if (row === rows - 1 && arrayIndex > 4) return false;\n    if (column === 0 && [0, 3, 5].includes(arrayIndex)) return false;\n    if (column === columns - 1 && [2, 4, 7].includes(arrayIndex)) return false;\n    return true;\n  });\n}\n\nfunction useTimer(status) {\n  const [seconds, setSeconds] = useState(0);\n  function addSecond() {\n    setSeconds(sec => sec + 1);\n  }\n  useEffect(() => {\n    let timer;\n    switch (status) {\n      case 'started':\n        timer = setInterval(addSecond, 1000);\n        break;\n      case 'new':\n        setSeconds(0);\n        break;\n      default:\n        break;\n    }\n    return () => clearInterval(timer);\n  }, [status]);\n  return seconds;\n}\n\nexport default MineSweeper;\n","import React from 'react';\nimport Minesweeper from './MineSweeper/index';\n\nfunction App() {\n  const [platform, setPlatform] = React.useState(\n    window.innerWidth <= 768 ? 'mobile' : 'desktop',\n  );\n  const [lastTouch, setLastTouch] = React.useState(new Date());\n  const [samePos, setSamePos] = React.useState(false);\n  React.useEffect(() => {\n    function onResize() {\n      if (window.innerWidth <= 768) {\n        setPlatform('mobile');\n      } else {\n        setPlatform('desktop');\n      }\n    }\n    window.addEventListener('resize', onResize);\n    return () => window.removeEventListener('resize', onResize);\n  }, []);\n  React.useEffect(() => {\n    function touchStart() {\n      setSamePos(true);\n      setLastTouch(new Date());\n    }\n    function touchMove() {\n      setSamePos(false);\n    }\n    window.addEventListener('touchstart', touchStart);\n    window.addEventListener('touchmove', touchMove);\n    return () => {\n      window.removeEventListener('touchstart', touchStart);\n      window.removeEventListener('touchmove', touchMove);\n    };\n  }, []);\n  return (\n    <div\n      style={\n        platform === 'desktop'\n          ? {\n              display: 'flex',\n              justifyContent: 'center',\n              alignItems: 'center',\n              height: '100%',\n            }\n          : {\n              display: 'flex',\n              justifyContent: 'flex-start',\n              alignItems: 'flex-start',\n              height: '100%',\n            }\n      }\n    >\n      <div\n        style={\n          platform === 'desktop'\n            ? {\n                display: 'inline-block',\n              }\n            : {\n                transform: 'scale(1.8)',\n                transformOrigin: 'left top',\n                display: 'inline-block',\n              }\n        }\n      >\n        <Minesweeper\n          defaultDifficulty=\"Beginner\"\n          sameTouchPos={samePos}\n          lastTouch={lastTouch}\n          platform={platform}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\nserviceWorker.unregister();\n"],"sourceRoot":""}